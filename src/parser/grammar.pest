Float = @{ ASCII_DIGIT+  ~ ("." ~ ASCII_DIGIT*)? ~ (^"e" ~ ASCII_DIGIT+)? }
Integer = @{ ASCII_DIGIT+ ~ (^"e" ~ ASCII_DIGIT+)? }
Hexadecimal = @{ "0x" ~ (ASCII_DIGIT | "A" | "B" | "C" | "D" | "E" | "F")+ }
Octal = @{ "0o" ~ ("0" | "1" | "2" | "3" | "4" | "5" | "6" | "7")+ }
Binary = @{ "0b" ~ ("0" | "1")+ }

Number = _{ Binary | Hexadecimal | Octal | Float | Integer }

Operation = _{ Add | Subtract | Power | Or | And | RightShift | LeftShift | Xor | Multiply | Divide | Modulus | Neq | Gte | Eq | Lte | Gt | Lt | Pipe }
    Add      = { "+" }
    Subtract = { "-" }
    Multiply = { "*" }
    Divide   = { "/" }
    Power    = { "**" }
    Modulus  = { "%" }
    Or       = { "|" }
    And      = { "&" }
    Xor      = { "^" }
    Gt       = { ">" }
    Lt       = { "<" }
    Gte      = { ">=" }
    Lte      = { "<=" }
    Eq       = { "==" }
    Neq      = { "<>" }
    Pipe     = { "|>" }
    RightShift = { ">>" }
    LeftShift = { "<<" }

UnaryOperation = _{ Neg | BitCompliment | Not }
    Neg = { "-" }
    BitCompliment = { "~" }
    Not = { "!" }

FunctionInvocation = { FunctionName ~ "(" ~ Arguments ~ ")" }
Arguments = _{ Expression ~ ( "," ~ Expression )* }

FunctionName = { Identifier }

Expression = { Term ~ (Operation ~ Term)* }
Term = _{ UnaryOperation? ~ (Number | FunctionInvocation | Variable | "(" ~ Expression ~ ")") }

Variable = { Identifier }

Identifier = _{ ASCII_ALPHA+ ~ (ASCII_DIGIT | ASCII_ALPHA)* }
Calculation = _{ SOI ~ Statement ~ EOI }

WHITESPACE = _{ " " | "\t" }

Statement = _{ FunctionDeclaration | Assignment | Expression }
Assignment = { Variable ~ "=" ~ Expression }
FunctionDeclaration = { FunctionName ~ "(" ~ Parameters ~ ")" ~ "=" ~ Expression }
Parameters = { Variable ~ ( "," ~ Variable )* }